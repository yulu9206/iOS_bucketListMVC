{"version":3,"sources":["sdk.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","RTM","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","root","factory","CryptoJS","Math","undefined","C","C_lib","lib","Base","F","extend","overrides","prototype","subtype","mixIn","hasOwnProperty","init","$super","apply","arguments","create","instance","properties","propertyName","toString","clone","WordArray","words","sigBytes","encoder","Hex","stringify","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","slice","random","nBytes","rcache","m_w","m_z","mask","result","_r","push","C_enc","enc","hexChars","bite","join","parse","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","data","_process","doFlush","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","max","_minBufferSize","nWordsReady","nBytesReady","min","offset","_doProcessBlock","processedWords","splice","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","message","_createHmacHelper","key","HMAC","algo","2","Base64","map","_map","base64Chars","byte1","byte2","byte3","triplet","j","charAt","paddingChar","base64Str","base64StrLength","paddingIndex","indexOf","bits1","bits2","bitsCombined","./core","3","undef","HmacMD5","./hmac","./md5","4","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","5","FF","b","c","d","x","GG","HH","II","T","abs","sin","MD5","_hash","M","offset_i","M_offset_i","H","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","nBitsTotal","nBitsLeft","nBitsTotalH","floor","nBitsTotalL","H_i","6","toObject","val","TypeError","Object","shouldUseNative","assign","test1","getOwnPropertyNames","test2","order2","test3","split","forEach","letter","keys","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","getOwnPropertySymbols","7","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","len","run","Item","array","noop","process","nextTick","args","Array","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","8","hmacMd5","h","base64","success","state","timerId","onsuccess","fail","reason","onfail","send","request","onSuccess","rtm","_unsafeSend","pdu","action","endsWith","authenticate","nonce","roleSecret","body","method","AUTH_METHOD","credentials","bind","handshake","role","roleSecretAuthProvider","opts","defaults","objectAssign","handshakeReply","crypto-js/enc-base64","crypto-js/hmac-md5","object-assign","9","logger","hasConsole","console","log","debugMode","DEBUG_SATORI_SDK","toLowerCase","DEBUG","error","stack","warn","debug","10","cMap","Map","storage","values","size","set","value","index","_index","get","clear","11","Observer","handlers","fn","filter","item","fire","col","shift","./logger.js","12","endpoint","appkey","options","minReconnectInterval","maxReconnectInterval","heartbeatInterval","heartbeatEnabled","highWaterMark","lowWaterMark","checkWritabilityInterval","_appendVersion","reconnectCount","lastId","ws","reconnectTimer","subscriptions","ackCallbacks","CMap","maskMessage","_isEndpointSecure","_initHeartbeatInterval","writable","_initWritableState","_initConnectionFSM","W3CWebSocket","Subscription","auth","RTM_VER","STOPPED","CONNECTING","CONNECTED","AWAITING","STATES","SubscriptionMode","RELIABLE","trackPosition","fastForward","SIMPLE","ADVANCED","start","stop","restart","isStopped","isConnected","getSubscription","subscriptionId","subscribe","channelOrSubId","mode","bodyOpts","subscription","containsKeys","reduce","acc","k","modeMandatoryKeys","subscribePdu","_nextId","_send","sp","onPdu","resubscribe","onCompleted","prevSub","newSub","unsubscribe","onAck","sub","onUnsubscribed","unsubscribeReplyPdu","isSubscribed","unsubscribePdu","publish","channel","command","read","onAckOrOpts","write","search","prefix","heartbeatTimer","interval","pingTimestamp","pongTimestamp","setInterval","_disconnect","Date","now","clearInterval","writableStateTimer","_setWritableState","_checkWritableState","bufferedAmount","newState","_connect","perMessageDeflate","onopen","onmessage","json","JSON","_recv","onerror","onclose","origPdu","id","ack","startsWith","str","suffix","subscription_id","close","_nextReconnectInterval","THRESHOLD_FAIL_COUNT","jitter","count","pow","_forEachSubscription","_subscribeAll","_disconnectAll","onDisconnect","_enter","_leave","_transition","open","authProvider","events","ev","_safelyCallFSMEvent","ep","ver","versionMatch","match","ret","./auth.js","./map.js","./observer.js","./subscription.js","./websocket.js","13","_opts","fast_forward","position","wasSubscribedAtLeastOnce","_onPosition","_markAsUnsubscribed","14","uri","NativeWebSocket","_global","WebSocket","MozWebSocket"],"mappings":"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","file":"sdk.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.RTM = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\t        function F() {}\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                F.prototype = this;\n\t                var subtype = new F();\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init')) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n},{}],2:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex != -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            var words = [];\n\t            var nBytes = 0;\n\t            for (var i = 0; i < base64StrLength; i++) {\n\t                if (i % 4) {\n\t                    var bits1 = map.indexOf(base64Str.charAt(i - 1)) << ((i % 4) * 2);\n\t                    var bits2 = map.indexOf(base64Str.charAt(i)) >>> (6 - (i % 4) * 2);\n\t                    var bitsCombined = bits1 | bits2;\n\t                    words[nBytes >>> 2] |= (bitsCombined) << (24 - (nBytes % 4) * 8);\n\t                    nBytes++;\n\t                }\n\t            }\n\n\t            return WordArray.create(words, nBytes);\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));\n},{\"./core\":1}],3:[function(require,module,exports){\n;(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./md5\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./md5\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacMD5;\n\n}));\n},{\"./core\":1,\"./hmac\":4,\"./md5\":5}],4:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));\n},{\"./core\":1}],5:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n},{\"./core\":1}],6:[function(require,module,exports){\n'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],7:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],8:[function(require,module,exports){\nvar hmac = require('crypto-js/hmac-md5');\nvar base64 = require('crypto-js/enc-base64');\nvar objectAssign = require('object-assign');\n\nvar AUTH_METHOD = 'role_secret';\n\nfunction hmacMd5(message, key) {\n  var h = hmac(message, key);\n  return base64.stringify(h);\n}\n\nfunction success(state) {\n  clearTimeout(state.timerId);\n  state.onsuccess();\n}\n\nfunction fail(state, reason) {\n  clearTimeout(state.timerId);\n  state.onfail(reason);\n}\n\nfunction send(request, state, onSuccess) {\n  state.rtm._unsafeSend(request, function (pdu) {\n    try {\n      if (pdu.action.endsWith('/ok')) {\n        onSuccess(pdu);\n      } else {\n        fail(state, pdu);\n      }\n    } catch (e) {\n      fail(state, e);\n    }\n  });\n}\n\nfunction authenticate(state, nonce) {\n  var hash = hmacMd5(nonce, state.roleSecret);\n  var request = {\n    action: 'auth/authenticate',\n    body: {\n      method: AUTH_METHOD,\n      credentials: { hash: hash },\n    },\n  };\n  send(request, state, success.bind(null, state));\n}\n\nfunction handshake(state) {\n  var request = {\n    action: 'auth/handshake',\n    body: {\n      method: AUTH_METHOD,\n      data: { role: state.role },\n    },\n  };\n  send(request, state, function (pdu) {\n    var nonce = pdu.body.data.nonce;\n    authenticate(state, nonce);\n  });\n}\n\nfunction roleSecretAuthProvider(role, roleSecret, opts) {\n  var defaults = { timeout: 30000 };\n  if (typeof role !== 'string') {\n    throw new TypeError('\"role\" is missing or invalid');\n  }\n  if (typeof roleSecret !== 'string') {\n    throw new TypeError('\"roleSecret\" is missing or invalid');\n  }\n  return function (rtm, onsuccess, onfail) {\n    var state = objectAssign(defaults, opts, {\n      rtm: rtm,\n      role: role,\n      handshakeReply: null,\n      onsuccess: onsuccess,\n      onfail: onfail,\n      roleSecret: roleSecret,\n    });\n\n    var timerId = setTimeout(function () {\n      fail(state, new Error('authentication timeout'));\n    }, state.timeout);\n    state.timerId = timerId;\n\n    handshake(state);\n  };\n}\n\nmodule.exports = {\n  hmacMd5: hmacMd5,\n  roleSecretAuthProvider: roleSecretAuthProvider,\n};\n\n},{\"crypto-js/enc-base64\":2,\"crypto-js/hmac-md5\":3,\"object-assign\":6}],9:[function(require,module,exports){\n(function (process){\n/* eslint-disable no-console */\n\nvar logger;\nvar hasConsole = console && console.log;\nvar debugMode = false;\n\nif (typeof process !== 'undefined' && 'DEBUG_SATORI_SDK' in process.env) {\n  debugMode = process.env.DEBUG_SATORI_SDK.toLowerCase() === 'true';\n}\n\nlogger = {\n  DEBUG: debugMode,\n  error: function (error) {\n    if (hasConsole) {\n      console.log.apply(console, arguments);\n      if (error.stack) {\n        console.log(error.stack);\n      }\n    }\n  },\n  warn: function () {\n    if (hasConsole) {\n      console.warn.apply(console, arguments);\n    }\n  },\n  debug: function () {\n    if (logger.DEBUG && hasConsole) {\n      console.log.apply(console, arguments);\n    }\n  },\n};\n\nmodule.exports = logger;\n\n}).call(this,require('_process'))\n},{\"_process\":7}],10:[function(require,module,exports){\nvar cMap;\n\nif (typeof (Map) !== 'undefined' && 'forEach' in Map.prototype) {\n  module.exports = Map;\n} else {\n  cMap = function () {\n    this.storage = {\n      keys: [],\n      values: [],\n    };\n    this.size = 0;\n  };\n\n  /**\n   * Sets a value for the specified key.\n   *\n   * @param {string} key - Key value.\n   * @param {any} value - Stored value.\n   *\n   * @return {void}\n   */\n  cMap.prototype.set = function (key, value) {\n    var index = this._index(key);\n    if (index >= 0) {\n      this.storage.values[index] = value;\n    } else {\n      this.storage.keys.push(key);\n      this.storage.values.push(value);\n    }\n\n    this.size = this.storage.keys.length;\n  };\n\n  /**\n   * Gets the value for specified key\n   *\n   * @param {string} key - Key value.\n   *\n   * @return {any} if key exists; {undefined} otherwise.\n   */\n  cMap.prototype.get = function (key) {\n    var index = this._index(key);\n\n    return index >= 0 ? this.storage.values[index] : undefined;\n  };\n\n  /**\n   * Deletes the key and the associated key value.\n   *\n   * @param {string} key - Key value to delete.\n   *\n   * @return {void}\n   */\n  cMap.prototype.delete = function (key) {\n    var index = this._index(key);\n    if (index >= 0) {\n      this.storage.keys.splice(index, 1);\n      this.storage.values.splice(index, 1);\n    }\n\n    this.size = this.storage.keys.length;\n  };\n\n  /**\n   * Clears Map values.\n   *\n   * @return {void}\n   */\n  cMap.prototype.clear = function () {\n    this.storage.keys = [];\n    this.storage.values = [];\n\n    this.size = this.storage.keys.length;\n  };\n\n  cMap.prototype._index = function (key) {\n    return this.storage.keys.indexOf(key);\n  };\n\n  module.exports = cMap;\n}\n\n},{}],11:[function(require,module,exports){\nvar logger = require('./logger.js');\n\n/**\n * Creates an observer instance.\n * @class\n */\nfunction Observer() {\n  this.handlers = {};\n}\n\nObserver.prototype = {\n  /**\n   * Attaches an event handler function for named event.\n   *\n   * The event <code>name</code> is one of the client or\n   * subscription state machine events,\n   * for example, <code>data</code> or <code>enter-connected</code>\n   * for the [RTM]{@link RTM} client or <code>enter-subscribed</code> for a\n   * [Subscription]{@link Subscription} object.\n   *\n   * The Protocol Data Unit (PDU) for the event is passed to the\n   * <code>fn</code> function parameter.\n   *\n   * @param {string} name - Event name.\n   *\n   * @param {function} fn - Event handler function.\n   *\n   * @return {void}\n   */\n  on: function (name, fn) {\n    if (!(name in this.handlers)) {\n      this.handlers[name] = [];\n    }\n    this.handlers[name].push(fn);\n  },\n\n  /**\n   * Removes an event handler.\n   *\n   * The event <code>name</code> is one of the client or\n   * subscription state machine events,\n   * for example, <code>data</code> or <code>enter-connected</code>\n   * for the [RTM]{@link RTM} client or <code>enter-subscribed</code> for a\n   * [Subscription]{@link Subscription} object.\n   *\n   * The Protocol Data Unit (PDU) for the event is passed to the\n   * <code>fn</code> function parameter.\n   *\n   * @param {string} name - Event name.\n   *\n   * @param {function} fn - Event handler function.\n   *\n   * @return {void}\n   */\n  off: function (name, fn) {\n    if (!(name in this.handlers)) {\n      return;\n    }\n    this.handlers[name] = this.handlers[name].filter(function (item) {\n      return item !== fn;\n    });\n  },\n\n  /**\n   * Executes all handlers attached to the given event type.\n   *\n   * The event <code>name</code> is one of the client or subscription state machine events,\n   * for example, <code>data</code> or <code>enter-connected</code>\n   * for the [RTM]{@link RTM} client or <code>enter-subscribed</code> for a\n   * [Subscription]{@link Subscription} object.\n   *\n   * @param {string} name - Event name.\n   *\n   * @return {void}\n   */\n  fire: function (name) {\n    var col = this.handlers[name] || [];\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    col.forEach(function (fn) {\n      try {\n        fn.apply(null, args);\n      } catch (e) {\n        logger.error(e);\n      }\n    });\n  },\n};\n\nmodule.exports = Observer;\n\n},{\"./logger.js\":9}],12:[function(require,module,exports){\nvar W3CWebSocket = require('./websocket.js');\nvar Observer = require('./observer.js');\nvar Subscription = require('./subscription.js');\nvar logger = require('./logger.js');\nvar auth = require('./auth.js');\nvar objectAssign = require('object-assign');\nvar CMap = require('./map.js');\n\nvar RTM_VER = 'v2';\nvar STOPPED = 'stopped';\nvar CONNECTING = 'connecting';\nvar CONNECTED = 'connected';\nvar AWAITING = 'awaiting';\nvar STATES = {};\n\n\n/**\n * Create a RTM client instance.\n * @class\n * @augments Observer\n *\n * @description\n * The <code>RTM</code> class is the main entry point to manage the\n * WebSocket connection from the JavaScript SDK to RTM.\n *\n * Use the RTM class to create a client instance from which you can\n * publish messages and subscribe to channels. Create separate\n * [Subscription]{@link Subscription} objects for each channel to\n * which you want to subscribe.\n *\n * Use the [publish(channel, message, onAck)]{@link RTM#publish}\n * method to publish messages and either the\n * [Subscription.on(name, fn)]{@link Subscription#on} or\n * [RTM.on(name, fn)]{@link RTM#on} methods to process incoming messages.\n *\n * A state machine for the client defines the status of the client instance.\n * A client instance can be in one of the following states: <code>stopped</code>,\n * <code>connecting</code>, <code>connected</code>, or code>awaiting</code>.\n *\n * Each client event occurs when the client enters or leaves a state. Use the\n * RTM.on(name, fn)]{@link RTM#on} method to define logic for when the client\n * transitions into or out of a state. See\n * <strong>State Machines</strong> in the online docs.\n *\n *\n * @example\n * // create an RTM client\n * var rtm = new RTM('ENDPOINT', 'APPKEY');\n *\n * // create a new subscription with 'your-channel' name\n* var subscription = rtm.subscribe('your-channel', RTM.SubscriptionMode.SIMPLE);\n *\n * // add subscription data handlers\n *\n * // the subscription receives any published message\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n *\n * // the client enters 'connected' state\n * rtm.on('enter-connected', function () {\n *   rtm.publish('your-channel', {key: 'value'});\n * });\n *\n * // the client receives any PDU - PDU is passed as a parameter\n * rtm.on('data', function (pdu) {\n *   if (pdu.action.endsWith('/error')) {\n *     rtm.restart();\n *   }\n * });\n *\n * // start the client\n * rtm.start();\n *\n * @param {string} endpoint - Endpoint for RTM.\n * Available from the Dev Portal.\n *\n * @param {string} appkey - Appkey used to access RTM.\n * Available from the Dev Portal.\n *\n * @param {object} opts - Additional parameters for the RTM client instance.\n *\n * @param {integer} [opts.minReconnectInterval=1000] - Minimum\n * time period, in milliseconds, to wait between reconnection attempts.\n *\n * @param {integer} [opts.maxReconnectInterval=120000] - Maximum\n * time period, in milliseconds, to wait between reconnection attempts.\n *\n * @param {boolean} [opts.heartbeatEnabled=true] - Enables periodic\n * heartbeat monitoring for the WebSocket connection.\n *\n * @param {object} [opts.authProvider] - Provider that manages\n * authentication for the RTM client.\n *\n * @param {integer} [opts.heartbeatInterval=60000] - Interval,\n * in milliseconds, to wait between heartbeat messages.\n *\n *\n * @param {integer} [opts.highWaterMark=4194304] - 4MB. High water mark,\n * in bytes, of the WebSocket write buffer. If the number of bytes queued in the\n * WebSocket write buffer exceeds this value, the SDK sets\n * [writeable]{@link RTM#writeable} to <code>false</code>.\n *\n * @param {integer} [opts.lowWaterMark=2097152] - 2MB. Low water mark,\n * in bytes, of the WebSocket write buffer. If the buffer rises above\n * <code>highWaterMark</code> and then drops below <code>lowWaterMark</code>,\n * the SDK sets [writeable]{@link RTM#writeable} to <code>true</code>.\n *\n * @param {integer} [opts.checkWritabilityInterval=100] - Interval,\n * in milliseconds, to check the queue length and update the <code>writable</code>\n * property as necessary.\n *\n * @property {boolean} writable\n * Indicates if the queue length in the WebSocket write buffer, in bytes,\n * is lower than the <code>highWaterMark</code> value.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n */\nfunction RTM(endpoint, appkey, opts) {\n  if (typeof endpoint !== 'string') {\n    throw new TypeError('\"endpoint\" is missing or invalid');\n  }\n  if (typeof appkey !== 'string') {\n    throw new TypeError('\"appkey\" is missing or invalid');\n  }\n  // superclass constructor call\n  Observer.call(this);\n  this.options = objectAssign({\n    minReconnectInterval: 1000,\n    maxReconnectInterval: 120000,\n    heartbeatInterval: 60000,\n    heartbeatEnabled: true,\n    highWaterMark: 1024 * 1024 * 4, // 4Mb is the maximum queue length. Writable flag sets to false\n    lowWaterMark: 1024 * 1024 * 2, // 2Mb unblock the writing. Writable flag sets to true\n    checkWritabilityInterval: 100,\n  }, opts);\n  this.endpoint = this._appendVersion(endpoint) + '?appkey=' + appkey;\n  this.reconnectCount = 0;\n  this.lastId = 0;\n  this.ws = null;\n  this.reconnectTimer = null;\n  this.subscriptions = {};\n  this.ackCallbacks = new CMap();\n  this.maskMessage = !this._isEndpointSecure(endpoint);\n\n  if (this.options.heartbeatEnabled) {\n    this._initHeartbeatInterval();\n  }\n  this.writable = true;\n  this._initWritableState();\n  this._initConnectionFSM();\n  this.on('error', logger.error);\n}\n\nRTM.logger = logger;\n\n/**\n * @typedef SubscriptionMode\n * @type {object}\n *\n * @property {boolean} trackPosition\n * Tracks the stream position received from RTM. RTM includes the <code>position</code>\n * parameter in responses to publish and subscribe requests and in subscription data messages.\n * The SDK can attempt to resubscribe to the channel data stream from this position.\n *\n * @property {boolean} fastForward\n * RTM fast-forwards the subscription when the SDK resubscribes to a channel.\n */\n\n/**\n * Subscription modes.\n *\n * @namespace\n * @readonly\n */\n\nRTM.SubscriptionMode = {\n  /**\n   * The JavaScript SDK\n   * tracks the <code>position</code> parameter and attempts to use that value when\n   * resubscribing. If the <code>position</code> parameter is expired, RTM fast-forwards\n   * to the earliest possible <code>position</code> value.\n   *\n   * This option may result in missed messages if the application has a slow connection\n   * to RTM and cannot keep up with the channel message data sent from RTM.\n   *\n   * For more information about the fast-forward feature, see <em>RTM API</em> in the online docs.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  RELIABLE: {\n    trackPosition: true,\n    fastForward: true,\n  },\n\n  /**\n   * The JavaScript SDK does not track the <code>position</code> parameter received from RTM.\n   * Instead, when resubscribing following a reconnection, RTM fast-forwards to\n   * the earliest possible <code>position</code> parameter value.\n   *\n   * This option may result in missed messages during reconnection if the application has\n   * a slow connection to RTM and cannot keep up with the channel message stream sent from RTM.\n   *\n   * For more information about the fast-forward feature, see <em>RTM API</em> in the online docs.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  SIMPLE: {\n    trackPosition: false,\n    fastForward: true,\n  },\n\n  /**\n   * The JavaScript SDK tracks the <code>position</code> parameter and always uses that value when\n   * resubscribing.\n   *\n   * If the stream position is expired when the SDK attempts to resubscribe, RTM\n   * sends an <code>expired_position</code> error and unsubscribes.\n   *\n   * If the application has\n   * a slow connection to RTM and cannot keep up with the channel message data sent from RTM,\n   * RTM sends an <code>out_of_sync</code> error and unsubscribes.\n   *\n   * For more information about the <code>expired_position</code> and <code>out_of_sync</code>\n   * errors, see <em>RTM API</em> in the online docs.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  ADVANCED: {\n    trackPosition: true,\n    fastForward: false,\n  },\n};\n\n/**\n * Creates an authentication provider for the the role-based authentication\n * method.\n *\n * The role-based authentication method is a two-step authentication process\n * based on the HMAC process, using the MD5 hashing routine:\n * <ul>\n * <li>The client obtains a nonce from the server in a handshake request.</li>\n * <li>The client then sends an authorization request with its role secret key\n * hashed with the received nonce.</li>\n * </ul>\n * <br>\n * Obtain a role secret key from the Dev Portal for your application.\n *\n * @param {string} role - User role to authenticate with.\n *\n * @param {string} roleSecret - Role secret key from Dev Portal.\n *\n * @param {object} opts - Additional authentication options.\n *\n * @param {integer} [opts.timeout=30000] - Amount of time, in milliseconds, before the\n * authentication operation times out.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {function} Authentication provider for the role-based authentication method.\n */\nRTM.roleSecretAuthProvider = function (role, roleSecret, opts) {\n  return auth.roleSecretAuthProvider(role, roleSecret, opts);\n};\nRTM.prototype = Object.create(Observer.prototype);\n\n/**\n * Starts the client.\n *\n * The client begins to establish the WebSocket connection\n * to RTM and then tracks the state of the connection. If the WebSocket\n * connection drops for any reason, the JavaScript SDK attempts to reconnect.\n *\n *\n * Use [RTM.on(name, fn)]{@link RTM#on} to define application functionality,\n * for example, when the application enters or leaves the\n * <code>connecting</code> or <code>connected</code> states.\n *\n * @return {void}\n */\nRTM.prototype.start = function () {\n  if (STOPPED !== this.state) {\n    throw new Error('RTM is already started');\n  }\n  this.fire('start');\n};\n\n/**\n * Stops the client. The SDK begins to close the WebSocket connection and\n * does not start it again unless you call [start()]{@link RTM#start}.\n *\n * Use this method to explicitly stop all interaction with RTM.\n *\n * Use [RTM.on(name, fn)]{@link RTM#on} to define application functionality,\n * for example, when the application enters or leaves the <code>stopped</code> state.\n *\n * @return {void}\n */\nRTM.prototype.stop = function () {\n  if (STOPPED === this.state) {\n    throw new Error('RTM is already stopped');\n  }\n  this.fire('stop');\n};\n\n/**\n * Restarts the client.\n *\n * @return {void}\n */\nRTM.prototype.restart = function () {\n  this.stop();\n  this.start();\n};\n\n/**\n * Returns <code>true</code> if the RTM client is in the <code>stopped</code> state.\n *\n * @return {boolean}\n * <code>true</code> if the client is in the <code>stopped</code> state; false otherwise.\n */\nRTM.prototype.isStopped = function () {\n  return this.state === STOPPED;\n};\n\n/**\n * Returns <code>true</code> if the client is in the <code>connected</code> state.\n *\n * In this state, the WebSocket connection is established and any authentication\n * (if necessary) has successfully completed.\n *\n * @return {boolean}\n * <code>true</code> if the client is in the <code>connected</code> state; false otherwise.\n */\nRTM.prototype.isConnected = function () {\n  return this.state === CONNECTED;\n};\n\n/**\n * Returns a [Subscription]{@link Subscription} object for the associated subscription id.\n * The <code>Subscription</code> object must exist.\n *\n * @param {string} subscriptionId - Subscription id.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {Subscription} The [Subscription]{@link Subscription} object.\n */\nRTM.prototype.getSubscription = function (subscriptionId) {\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  return this.subscriptions[subscriptionId];\n};\n\n/**\n * Creates a subscription to the specified channel.\n *\n * When you create a channel subscription, you can specify additional properties,\n * for example, add a filter to the subscription and specify the\n * behavior of the SDK when resubscribing after a reconnection.\n *\n * For more information about the options for a channel subscription,\n * see <strong>Subscribe PDU</strong> in the online docs.\n *\n * @param {string} channelOrSubId - String that identifies the channel. If you do not\n * use the <code>filter</code> parameter, it is the channel name. Otherwise,\n * it is a unique identifier for the channel (subscription id).\n *\n * @param {RTM.SubscriptionMode} mode\n * Subscription mode. This mode determines the behaviour of the Javascript\n * SDK and RTM when resubscribing after a reconnection.\n *\n * For more information about the options for a subscription,\n * see <strong>Subscribe PDU</strong> in the online docs.\n *\n * @param {object} [bodyOpts={}]\n * Additional subscription options for a channel subscription. These options\n * are sent to RTM in the <code>body</code> element of the\n * Protocol Data Unit (PDU) that represents the subscribe request.\n *\n * For more information about the <code>body</code> element of a PDU,\n * see <em>RTM API</em> in the online docs.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {Subscription} - Subscription object.\n *\n * @example\n * var rtm = new RTM('ENDPOINT', 'APPKEY');\n *\n * // create a subscription with 'your-channel' name\n * var subscription = rtm.subscribe('your-channel', RTM.SubscriptionMode.SIMPLE);\n *\n * // the subscription receives any published message\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n *\n * rtm.start();\n *\n * @example\n * var rtm = new RTM('your-endpoint', 'your-appkey');\n *\n * // subscribe to the channel named 'my-channel' using a filter\n * var subscription = rtm.subscribe('my-filter', RTM.SubscriptionMode.SIMPLE, {\n *   filter: 'SELECT * FROM my-channel WHERE object.param >= 1 OR object.id == 0',\n * });\n *\n * // receive messages published to the channel\n * subscription.on('rtm/subscription/data', function (pdu) {\n *   pdu.body.messages.forEach(console.log);\n * });\n *\n * // receive subscription data messages\n * subscription.on('data', function (pdu) {\n *   if (pdu.action.endsWith('/error')) {\n *     rtm.restart();\n *   }\n * });\n *\n * rtm.start();\n *\n * @see {@link RTM.SubscriptionMode.SIMPLE}\n * @see {@link RTM.SubscriptionMode.RELIABLE}\n * @see {@link RTM.SubscriptionMode.ADVANCED}\n */\nRTM.prototype.subscribe = function (channelOrSubId, mode, bodyOpts) {\n  var containsKeys = function (map, keys) {\n    return keys.reduce(function (acc, k) {\n      return acc && {}.hasOwnProperty.call(map, k);\n    }, true);\n  };\n  var subscription;\n  var pdu;\n  var opts;\n  var modeMandatoryKeys = ['fastForward', 'trackPosition'];\n\n  if (typeof channelOrSubId !== 'string') {\n    throw new TypeError('\"channelOrSubId\" is missing or invalid');\n  }\n\n  if (!(typeof mode === 'object') || !containsKeys(mode, modeMandatoryKeys)) {\n    throw new TypeError('Subscription mode has incorrect value: ' + mode + '\\n' +\n                        'Mode should contains the following mandatory fields: ' + modeMandatoryKeys.join(', ') + '\\n' +\n                        'See also: RTM.SubscriptionMode.SIMPLE, RTM.SubscriptionMode.ADVANCED, RTM.SubscriptionMode.RELIABLE');\n  }\n\n  if (this.subscriptions[channelOrSubId]) {\n    throw new Error('Cannot create subscription ' + subscription + ' twice');\n  }\n\n  opts = objectAssign({}, mode, { bodyOpts: bodyOpts });\n  subscription = new Subscription(channelOrSubId, opts);\n  this.subscriptions[channelOrSubId] = subscription;\n  if (this.isConnected()) {\n    pdu = subscription.subscribePdu(this._nextId());\n    this._send(pdu, function (sp) {\n      subscription.onPdu(sp);\n    });\n  }\n  return subscription;\n};\n\n/**\n * Updates an existing [Subscription]{@link Subscription} object. All event\n * handlers are copied to the updated object.\n *\n * Use this method to change an existing subscription, for example,\n * to add or change a filter.\n *\n * @param {string} channelOrSubId - Subscription id or channel name of\n * the existing subscription.\n *\n * @param {Object} opts\n * Properties for the updated <code>Subscription</code> object. See\n * [RTM.subscribe(channelOrSubId, opts)]{@link RTM#subscribe} and the\n * <em>RTM API</em> in the online docs for the supported property names.\n *\n * @param {Function} [onCompleted]\n * Function to execute on the updated <code>Subscription</code> object, passed\n * as a parameter.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.resubscribe = function (channelOrSubId, mode, bodyOpts, onCompleted) {\n  var self = this;\n  var prevSub;\n  var newSub;\n  if (typeof channelOrSubId !== 'string') {\n    throw new TypeError('\"channelOrSubId\" is missing or invalid');\n  }\n  prevSub = self.subscriptions[channelOrSubId];\n  self.unsubscribe(channelOrSubId, function () {\n    newSub = self.subscribe(channelOrSubId, mode, bodyOpts);\n    newSub.handlers = prevSub.handlers;\n    if (onCompleted) {\n      onCompleted(newSub);\n    }\n  });\n};\n\n\n/**\n * Removes the specified subscription.\n *\n * The response Protocol Data Unit (PDU) from the RTM is\n * passed as a parameter to the <code>onAck</code> function.\n *\n * For more information, see <strong>Unsubscribe PDU</strong> in the\n * online docs.\n *\n * @param {string} subscriptionId - Subscription id or channel name.\n *\n * @param {Function} [onAck]\n * Function to execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.unsubscribe = function (subscriptionId, onAck) {\n  var self = this;\n  var sub;\n  var onUnsubscribed;\n  var pdu;\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  sub = self.subscriptions[subscriptionId];\n  if (!sub) {\n    throw new Error('Unknown subscription ' + subscriptionId);\n  }\n  // This method is called when rtm/unsubscribe/(ok|error) is returned.\n  // If subscription is not subscribed (e.g. client is disconnected)\n  // then this method is called immediately without argument.\n  onUnsubscribed = function (unsubscribeReplyPdu) {\n    if (unsubscribeReplyPdu) {\n      sub.onPdu(unsubscribeReplyPdu);\n    }\n    delete self.subscriptions[subscriptionId];\n    if (onAck) {\n      onAck(unsubscribeReplyPdu);\n    }\n  };\n  if (sub.isSubscribed) {\n    pdu = sub.unsubscribePdu(self._nextId());\n    self._send(pdu, onUnsubscribed);\n  } else {\n    onUnsubscribed();\n  }\n};\n\n/**\n * Publishes a message to a channel. The [RTM]{@link RTM} client\n * must be connected.\n *\n * @example\n * rtm.publish('channel', {key: 'value'}, function (pdu) {\n *   if (!pdu.action.endsWith('/ok')) {\n *     console.log('something went wrong');\n *   }\n * });\n *\n * @param {string} channel - Channel name.\n *\n * @param {JSON} message\n * JSON that represents the message payload to publish.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.publish = function (channel, message, onAck) {\n  var command;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof message === 'undefined') {\n    throw new TypeError('\"message\" is missing');\n  }\n  command = {\n    action: 'rtm/publish',\n    body: {\n      channel: channel,\n      message: message,\n    },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Reads the latest message written to a specific channel, as a Protocol\n * Data Unit (PDU). The [RTM]{@link RTM} client must be connected.\n *\n * @variation 1\n *\n * @param {string} channel - Channel name.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * rtm.read('channel', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n *\n * @also\n *\n * Reads the latest message written to specific channel, as a Protocol\n * Data Unit (PDU).\n * The [RTM]{@link RTM} client must be connected.\n *\n * @variation 2\n *\n * @param {string} channel - Channel name.\n *\n * @param {object} [opts={}]\n * Additional <code>body</code> options for the read PDU.\n * For more information, see <em>RTM API/em> in the online docs.\n *\n * @param {object} [opts.bodyOpts={}]\n * Additional read request options. These options are sent to\n * RTM in the <code>body</code> element of the\n * PDU that represents the read request.\n *\n * @param {Function} [opts.onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * rtm.read('channel', {\n *   bodyOpts: { position: '1485444476:0' },\n *   onAck: function (pdu) {\n *     console.log(pdu);\n *   }\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.read = function (channel, onAckOrOpts) {\n  var command;\n  var opts;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof onAckOrOpts === 'function') {\n    opts = { onAck: onAckOrOpts };\n  } else {\n    opts = onAckOrOpts;\n  }\n  command = {\n    action: 'rtm/read',\n    body: objectAssign({}, opts.bodyOpts, { channel: channel }),\n  };\n  return this._send(command, opts.onAck);\n};\n\n/**\n * Writes a value to the specified channel. The [RTM]{@link RTM} client must be connected.\n *\n * @param {string} channel - Channel name.\n *\n * @param {JSON} value\n * JSON that represents the message payload to publish.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * rtm.write('channel', 'value', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.write = function (channel, value, onAck) {\n  var command;\n  if ((typeof channel !== 'string')) {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof value === 'undefined') {\n    throw new TypeError('\"value\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/write',\n    body: { channel: channel, message: value },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Deletes the value for the associated channel. The [RTM]{@link RTM} client must be connected.\n *\n * @param {string} channel - Channel name.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * rtm.delete('channel', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.delete = function (channel, onAck) {\n  var command;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/delete',\n    body: { channel: channel },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Performs a channel search for a given user-defined prefix. This method passes\n * replies to the callback. The [RTM]{@link RTM} client must be connected.\n *\n * RTM may send multiple responses to the same search request: zero or\n * more search result PDUs with an action of <code>rtm/search/data</code>\n * (depending on the results of the search). Each channel found is only sent\n * once. After the search result PDUs, RTM follows with a positive response PDU:\n * <code>rtm/search/ok</code>.\n *\n * Otherwise, RTM sends an error PDU with an action of <code>rtm/search/error</code>.\n *\n * @param {string} prefix - Channel prefix.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * var channels = [];\n * rtm.search('ch', function (pdu) {\n *     channels = channels.concat(pdu.body.channels);\n *     if (pdu.action === 'rtm/search/ok') {\n *       console.log(channels);\n *     }\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.search = function (prefix, onAck) {\n  var command;\n  if (typeof prefix !== 'string') {\n    throw new TypeError('\"prefix\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/search',\n    body: { prefix: prefix },\n  };\n  return this._send(command, onAck);\n};\n\n// Private methods\n\nRTM.prototype._initHeartbeatInterval = function () {\n  var self = this;\n  var heartbeatTimer;\n  var interval = this.options.heartbeatInterval;\n\n  this.on('open', function () {\n    var pingTimestamp = 0;\n    var pongTimestamp = 0;\n    heartbeatTimer = setInterval(function () {\n      if (pongTimestamp < pingTimestamp) {\n        self._disconnect();\n        return;\n      }\n      pingTimestamp = Date.now();\n      self.publish('$heartbeat', '', function () {\n        pongTimestamp = Date.now();\n      });\n    }, interval);\n  });\n\n  this.on('close', function () {\n    clearInterval(heartbeatTimer);\n  });\n};\n\nRTM.prototype._initWritableState = function () {\n  var self = this;\n  var writableStateTimer;\n  var interval = this.options.checkWritabilityInterval;\n\n  this.on('open', function () {\n    self._setWritableState(true);\n    writableStateTimer = setInterval(function () {\n      self._checkWritableState();\n    }, interval);\n  });\n\n  this.on('close', function () {\n    clearInterval(writableStateTimer);\n    self._setWritableState(false);\n  });\n};\n\nRTM.prototype._checkWritableState = function () {\n  if (this.writable && this.ws.bufferedAmount > this.options.highWaterMark) {\n    this._setWritableState(false);\n  } else if (!this.writable && this.ws.bufferedAmount < this.options.lowWaterMark) {\n    this._setWritableState(true);\n  }\n};\n\nRTM.prototype._setWritableState = function (newState) {\n  if (this.writable !== newState) {\n    this.writable = newState;\n    this.fire('change-writability', this.writable);\n  }\n};\n\nRTM.prototype._connect = function () {\n  var self = this;\n  var ws;\n  logger.debug('Connecting to', this.endpoint);\n  ws = this.ws = new W3CWebSocket(this.endpoint, [], {\n    perMessageDeflate: false,\n  });\n  ws.onopen = function () {\n    self.fire('open');\n  };\n  ws.onmessage = function (message) {\n    var json;\n    try {\n      logger.debug('recv<', message.data);\n      json = JSON.parse(message.data);\n      self._recv(json);\n      self.fire('data', json);\n    } catch (error) {\n      self.fire('error', error);\n    }\n  };\n  ws.onerror = function (error) {\n    self.fire('error', error);\n  };\n  ws.onclose = function () {\n    if (self.ws === ws) {\n      self.ws = null;\n      self.fire('close');\n    }\n  };\n};\n\nRTM.prototype._send = function (pdu, onAck) {\n  if (!this.isConnected()) {\n    throw new Error('Client is not connected');\n  }\n  return this._unsafeSend(pdu, onAck);\n};\n\nRTM.prototype._unsafeSend = function (origPdu, onAck) {\n  var pdu = objectAssign({}, origPdu);\n  var json;\n  if (onAck) {\n    pdu.id = 'id' in pdu ? pdu.id : this._nextId();\n    this.ackCallbacks.set(pdu.id, onAck);\n  }\n  json = JSON.stringify(pdu);\n  logger.debug('send>', json);\n  try {\n    this.ws.send(json, {\n      mask: this.maskMessage,\n    });\n  } catch (error) {\n    this.fire('error', error);\n  }\n  this._checkWritableState();\n};\n\nRTM.prototype._recv = function (pdu) {\n  var subscriptionId;\n  var subscription;\n  var ack;\n  // standalone versions because `startsWith` && `endsWith` appeared in ES6 only\n  var startsWith = function (str, prefix) {\n    return str.substr(0, prefix.length) === prefix;\n  };\n  var endsWith = function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  };\n  if (pdu.body && ('subscription_id' in pdu.body) && startsWith(pdu.action, 'rtm/subscription/')) {\n    subscriptionId = pdu.body.subscription_id;\n    subscription = this.subscriptions[subscriptionId];\n    if (subscription) {\n      subscription.onPdu(pdu);\n    }\n  }\n  if ('id' in pdu) {\n    ack = this.ackCallbacks.get(pdu.id);\n    if (ack) {\n      if (!endsWith(pdu.action, '/data')) {\n        this.ackCallbacks.delete(pdu.id);\n      }\n      ack(pdu);\n    }\n  }\n};\n\nRTM.prototype._disconnect = function () {\n  var ws = this.ws;\n  if (ws) {\n    ws.onclose();\n    ws.onclose = null;\n    ws.close();\n  }\n  this.ackCallbacks.clear();\n};\n\nRTM.prototype._nextId = function () {\n  this.lastId += 1;\n  return this.lastId;\n};\n\nRTM.prototype._nextReconnectInterval = function () {\n  var THRESHOLD_FAIL_COUNT = 30;\n  var minReconnectInterval = this.options.minReconnectInterval;\n  var maxReconnectInterval = this.options.maxReconnectInterval;\n  var jitter = Math.random() * this.options.minReconnectInterval;\n  var count = Math.min(this.reconnectCount, THRESHOLD_FAIL_COUNT);\n  var interval = Math.min(maxReconnectInterval,\n      jitter + (minReconnectInterval * Math.pow(2, count)));\n  return interval;\n};\n\nRTM.prototype._forEachSubscription = function (fn) {\n  var self = this;\n  Object.keys(self.subscriptions).forEach(function (subscriptionId) {\n    if ({}.hasOwnProperty.call(self.subscriptions, subscriptionId)) {\n      fn(subscriptionId, self.subscriptions[subscriptionId]);\n    }\n  });\n};\n\nRTM.prototype._subscribeAll = function () {\n  var self = this;\n  this._forEachSubscription(function (subscriptionId, subscription) {\n    var pdu = subscription.subscribePdu(self._nextId());\n    self._send(pdu, function (sp) {\n      subscription.onPdu(sp);\n    });\n  });\n};\n\nRTM.prototype._disconnectAll = function () {\n  this._forEachSubscription(function (subscriptionId, subscription) {\n    subscription.onDisconnect();\n  });\n};\n\nRTM.prototype._isEndpointSecure = function (endpoint) {\n  if (endpoint.indexOf('wss://') === 0) {\n    return true;\n  }\n\n  return false;\n};\n\n// Connection Finite State Machine\n//\nSTATES[STOPPED] = {\n  _enter: function () {\n    this._disconnect();\n  },\n  _leave: function () {},\n  start: function () {\n    this._transition(CONNECTING);\n  },\n  close: function () {},\n};\nSTATES[CONNECTING] = {\n  _enter: function () {\n    try {\n      this._connect();\n    } catch (e) {\n      this.fire('error', e);\n    }\n  },\n  _leave: function () {},\n  open: function () {\n    var self = this;\n    var onsuccess;\n    var onfail;\n    this.lastId = 0;\n    if (this.options.authProvider) {\n      onsuccess = function () {\n        self.fire('authenticated');\n        self._transition(CONNECTED);\n      };\n      onfail = function (e) {\n        self.fire('error', e);\n      };\n      this.options.authProvider(this, onsuccess, onfail);\n    } else {\n      this._transition(CONNECTED);\n    }\n  },\n  error: function () {\n    this._transition(AWAITING);\n  },\n  close: function () {\n    this._transition(AWAITING);\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n};\n\nSTATES[CONNECTED] = {\n  _enter: function () {\n    this.reconnectCount = 0;\n    this._subscribeAll();\n  },\n  _leave: function () {\n    this._disconnectAll();\n  },\n  close: function () {\n    this._transition(AWAITING);\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n};\n\nSTATES[AWAITING] = {\n  _enter: function () {\n    var self = this;\n    var interval;\n    this._disconnect();\n    interval = this._nextReconnectInterval();\n    this.reconnectTimer = setTimeout(function () {\n      self.reconnectCount += 1;\n      self._transition(CONNECTING);\n    }, interval);\n  },\n  _leave: function () {\n    if (this.reconnectTimer !== null) {\n      clearTimeout(this.reconnectTimer);\n    }\n    this.reconnectTimer = null;\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n  close: function () { },\n};\n\nRTM.prototype._initConnectionFSM = function () {\n  var self = this;\n  var events = [\n    'open',\n    'close',\n    'error',\n    'start',\n    'stop',\n    'reconnect',\n  ];\n  this._transition(STOPPED);\n  events.forEach(function (ev) {\n    self.on(ev, function () {\n      self._safelyCallFSMEvent(ev);\n    });\n  });\n};\n\nRTM.prototype._safelyCallFSMEvent = function (ev) {\n  var fn = STATES[this.state][ev];\n  logger.debug('FSM event:', ev, 'Current state:', this.state);\n  if (fn) {\n    try {\n      fn.call(this);\n    } catch (error) {\n      logger.error(error, 'Unexpected error during event callback call', this.state, ev);\n    }\n  } else {\n    logger.warn('Nothing to do for event', ev, this.state);\n  }\n};\n\nRTM.prototype._transition = function (newState) {\n  logger.debug('Transition from', this.state, 'to', newState);\n  if (this.state) {\n    this._safelyCallFSMEvent('_leave');\n    this.fire('leave-' + this.state);\n  }\n  this.state = newState;\n  this._safelyCallFSMEvent('_enter');\n  this.fire('enter-' + this.state);\n};\n\nRTM.prototype._appendVersion = function (ep) {\n  var versionMatch = ep.match(/\\/(v\\d+)$/);\n  var ret = ep;\n  var ver;\n\n  if (versionMatch !== null) {\n    ver = versionMatch[1];\n    logger.warn(\n        'satori-rtm-sdk: specifying RTM endpoint with protocol version is deprecated.\\n' +\n        'satori-rtm-sdk: please remove version \\'' + ver + '\\' from endpoint:\\'' + ep + '\\''\n    );\n    return ret;\n  }\n\n  if (ret[ret.length - 1] !== '/') {\n    ret += '/';\n  }\n\n  return ret + RTM_VER;\n};\n\nmodule.exports = RTM;\n\n},{\"./auth.js\":8,\"./logger.js\":9,\"./map.js\":10,\"./observer.js\":11,\"./subscription.js\":13,\"./websocket.js\":14,\"object-assign\":6}],13:[function(require,module,exports){\nvar Observer = require('./observer.js');\nvar objectAssign = require('object-assign');\n\n/**\n * Create a subscription instance.\n * @class\n * @augments Observer\n *\n * @description\n * The <code>Subscription</code> class manages the state and events of a\n * subscription.\n *\n * You can use the <code>Subscription</code> class to define application functionality\n * when specific events occur, like receiving a message, or when the subscription\n * enters different subscription state machine state.\n *\n * When the application receives a message as subscription data, the <code>data</code>\n * event occurs and the received message is passed, as a Protocol Data Unit (PDU),\n * to the <code>fn</code> parameter of the\n * [Subscription.on(event, fn)]{@link Subscription#on} event handler method.\n *\n * Use the [Subscription.on(event, fn)]{@link Subscription#on} method to add an\n * event handler to the subscription, which 'fires' when the subscription\n * receives a published message. The event parameter in this method can take a\n * value of <code>data</code> or the value of the action element of the PDU,\n * for example, <code>rtm/subscription/data</code>.\n *\n * You can also set event handlers when the subscription enters or leaves\n * a state in the subscription state machine. A subscription can be in\n * one of the following states: <code>subscribing</code>, <code>subscribed</code>,\n * <code>unsubscribing</code>, <code>unsubscribed</code>, or <code>failed</code>.\n *\n * See\n * <strong>State Machines</strong> in the online docs.\n *\n * <strong>Note:</strong> When the connection from the RTM client to\n * RTM drops, all subscriptions are unsubscribed, and then resubscribed\n * when the connection is restored. You can direct the JavaScript SDK to automatically\n * reconnect or you can detect the disconnect manually and then reconnect to\n * RTM at the proper message stream position with the\n * <code>position</code> parameter.\n *\n * @example\n * // create a new subscription to the 'your-channel' channel\n * var subscription = rtm.subscribe('your-channel');\n *\n *\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n * subscription.on('enter-subscribed', function () {\n *     rtm.publish('your-channel', {type: 'init'});\n * });\n * subscription.on('data', function (pdu) {\n *     if (pdu.action.endWith('/error')) {\n *         rtm.restart();\n *     }\n * });\n *\n * @param {string} subscriptionId - String that identifies the channel. If you do not\n * use the <code>filter</code> parameter, it is the channel name. Otherwise,\n * it is a unique identifier for the channel (subscription id).\n *\n * @param {Object} opts - Additional subscription options.\n *\n * @param {boolean} [opts.mode]\n * Sets subscription mode. Can be <code>SIMPLE</code>, <code>RELIABLE</code>, or\n * <code>ADVANCED</code>.\n *\n * @param {object} [opts.bodyOpts={}]\n * Additional subscription options for a channel subscription. These options\n * are sent to RTM in the <code>body</code> element of the PDU that represents the subscribe\n * request.\n *\n * For more information about the <code>body</code> element of a PDU,\n * see <em>RTM API</em> in the online docs.\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n */\nfunction Subscription(subscriptionId, _opts) {\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  Observer.call(this);\n\n  this.options = objectAssign({}, _opts);\n  if (typeof this.options.bodyOpts !== 'object') {\n    this.options.bodyOpts = {};\n  }\n  if (this.options.fastForward) {\n    this.options.bodyOpts.fast_forward = true;\n  }\n\n  this.position = null;\n  this.subscriptionId = subscriptionId;\n  this.wasSubscribedAtLeastOnce = false;\n  this.isSubscribed = false;\n  /* eslint-enable camelcase */\n}\n\nSubscription.prototype = Object.create(Observer.prototype);\n\nSubscription.prototype.subscribePdu = function (id) {\n  var body;\n\n  // inherit all users options like 'filter', 'fast_forward'\n  if (this.options.bodyOpts.filter) {\n    body = { subscription_id: this.subscriptionId };\n  } else {\n    body = { channel: this.subscriptionId };\n  }\n\n  body = objectAssign(body, this.options.bodyOpts);\n\n  if (this.wasSubscribedAtLeastOnce) {\n    if (this.position !== null) {\n      body.position = this.position;\n    } else {\n      delete body.position;\n    }\n  }\n  return {\n    id: id,\n    action: 'rtm/subscribe',\n    body: body,\n  };\n};\n\nSubscription.prototype.unsubscribePdu = function (id) {\n  return {\n    id: id,\n    action: 'rtm/unsubscribe',\n    body: { subscription_id: this.subscriptionId },\n  };\n};\n\nSubscription.prototype.onPdu = function (pdu) {\n  var body = pdu.body;\n  if (body && body.position) {\n    this._onPosition(body.position);\n  }\n  if (pdu.action === 'rtm/subscribe/ok') {\n    this.isSubscribed = true;\n    this.wasSubscribedAtLeastOnce = true;\n    this.fire('enter-subscribed');\n  }\n  if (pdu.action === 'rtm/unsubscribe/ok') {\n    this._markAsUnsubscribed();\n  }\n  if (pdu.action === 'rtm/subscription/error') {\n    this._markAsUnsubscribed();\n  }\n  this.fire('data', pdu, this);\n  this.fire(pdu.action, pdu, this);\n};\n\nSubscription.prototype.onDisconnect = function () {\n  this._markAsUnsubscribed();\n};\n\nSubscription.prototype._onPosition = function (position) {\n  if (this.options.trackPosition) {\n    this.position = position;\n  }\n  this.fire('position', position, this);\n};\n\nSubscription.prototype._markAsUnsubscribed = function () {\n  if (this.isSubscribed) {\n    this.isSubscribed = false;\n    this.fire('leave-subscribed');\n  }\n};\n\nmodule.exports = Subscription;\n\n},{\"./observer.js\":11,\"object-assign\":6}],14:[function(require,module,exports){\nvar _global = (function () {\n  return this;\n}());\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\nfunction W3CWebSocket(uri) {\n  return new NativeWebSocket(uri);\n}\n\nmodule.exports = NativeWebSocket ? W3CWebSocket : null;\n\n},{}]},{},[12])(12)\n});"],"sourceRoot":"/source/"}